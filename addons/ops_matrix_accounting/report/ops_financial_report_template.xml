<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--
        Financial Report - Executive QWeb Template
        ==========================================
        Audit-Grade Financial Statement Styling
        Inspired by Big 4 Consulting Firm Standards

        v19.3.2.0: Phase 16 - VOGUE Update (Premium Executive Styling)

        PDF COMPATIBILITY:
        - NO CSS Variables (literal hex codes only)
        - NO Remote Fonts (system fonts only)
        - Force Print Colors (-webkit-print-color-adjust: exact)
        - Table-based layouts for wkhtmltopdf
    -->

    <!-- Define the PDF Report Action -->
    <record id="action_report_ops_financial" model="ir.actions.report">
        <field name="name">Financial Report</field>
        <field name="model">ops.financial.report.wizard</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ops_matrix_accounting.report_ops_financial_document</field>
        <field name="report_file">ops_matrix_accounting.report_ops_financial_document</field>
        <field name="print_report_name">'Financial_Report_%s' % (object.report_type)</field>
    </record>

    <!-- QWeb PDF Template -->
    <template id="report_ops_financial_document">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="ops_matrix_accounting.ops_external_layout">

                    <!-- ================================================
                         PAGE 1: EXECUTIVE COVER PAGE
                         ================================================ -->
                    <div class="page ops-cover-page" style="background: #ffffff !important; -webkit-print-color-adjust: exact !important;">

                        <!-- Cover Header Band - Dark Theme -->
                        <div class="ops-cover-header-band" style="background: #0f172a !important; padding: 40px 50px; -webkit-print-color-adjust: exact !important;">
                            <table style="width: 100%;">
                                <tr>
                                    <td style="vertical-align: middle;">
                                        <!-- Logo -->
                                        <span class="ops-cover-logo-box" style="display: inline-block; width: 52px; height: 52px; background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%); border-radius: 10px; text-align: center; line-height: 52px; font-family: Georgia, serif; font-size: 26px; font-weight: bold; color: #ffffff; vertical-align: middle; -webkit-print-color-adjust: exact !important;">
                                            <t t-esc="(report_data.get('company', 'O') or 'O')[0]"/>
                                        </span>
                                        <span style="display: inline-block; vertical-align: middle; margin-left: 14px;">
                                            <span style="font-size: 20px; font-weight: bold; color: #ffffff; display: block;"><t t-esc="report_data.get('company', 'Company')"/></span>
                                            <span style="font-size: 11px; color: rgba(255, 255, 255, 0.6);">Financial Intelligence</span>
                                        </span>
                                    </td>
                                    <td style="text-align: right; vertical-align: middle;">
                                        <!-- Fiscal Badge -->
                                        <div style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); padding: 10px 18px; border-radius: 8px; display: inline-block;">
                                            <div style="font-size: 10px; font-weight: 600; color: rgba(255, 255, 255, 0.6); text-transform: uppercase; letter-spacing: 1px;">Report Period</div>
                                            <div style="font-size: 16px; font-weight: bold; color: #ffffff; margin-top: 2px;">
                                                <t t-if="report_data.get('date_from') and report_data.get('date_to')">
                                                    <t t-esc="report_data['date_to']"/>
                                                </t>
                                                <t t-else="">
                                                    <t t-esc="report_data.get('date_to', 'Current')"/>
                                                </t>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <!-- Accent Bar -->
                        <div style="height: 6px; background: linear-gradient(90deg, #d97706 0%, #f59e0b 30%, #3b82f6 70%, #60a5fa 100%); -webkit-print-color-adjust: exact !important;"></div>

                        <!-- Cover Title Area -->
                        <div style="padding: 60px 50px 40px 50px; background: #0f172a !important; -webkit-print-color-adjust: exact !important;">
                            <div style="font-size: 11px; font-weight: 600; color: #f59e0b; text-transform: uppercase; letter-spacing: 3px; margin-bottom: 12px;">Financial Statement</div>
                            <h1 style="font-family: Georgia, 'Times New Roman', serif; font-size: 38px; font-weight: bold; color: #ffffff; line-height: 1.15; margin: 0;">
                                <t t-esc="report_data.get('title', 'Financial Report')"/>
                            </h1>
                            <p style="font-size: 14px; color: rgba(255, 255, 255, 0.7); margin-top: 12px;">
                                <t t-esc="report_data.get('branch', 'All Branches')"/>
                            </p>
                        </div>

                        <!-- Cover Content Area - KPI Cards -->
                        <div style="padding: 50px;">
                            <t t-if="doc.report_type == 'pl'">
                                <table style="width: 100%; border-collapse: separate; border-spacing: 16px 0; margin-bottom: 30px;">
                                    <tr>
                                        <!-- Revenue Card -->
                                        <td style="width: 33%; vertical-align: top;">
                                            <div style="background: #f8fafc !important; border: 1px solid #e2e8f0; border-radius: 10px; padding: 24px; text-align: center; border-top: 4px solid #3b82f6 !important; -webkit-print-color-adjust: exact !important;">
                                                <div style="font-size: 10px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Total Revenue</div>
                                                <div style="font-size: 26px; font-weight: bold; color: #0f172a; font-family: 'DejaVu Sans Mono', 'Courier New', monospace;">
                                                    <t t-esc="'{:,.2f}'.format(report_data.get('income_total', 0))"/>
                                                </div>
                                                <div style="font-size: 11px; font-weight: bold; color: #059669 !important; margin-top: 8px; -webkit-print-color-adjust: exact !important;">Income</div>
                                            </div>
                                        </td>
                                        <!-- Expenses Card -->
                                        <td style="width: 33%; vertical-align: top;">
                                            <div style="background: #f8fafc !important; border: 1px solid #e2e8f0; border-radius: 10px; padding: 24px; text-align: center; border-top: 4px solid #dc2626 !important; -webkit-print-color-adjust: exact !important;">
                                                <div style="font-size: 10px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Total Expenses</div>
                                                <div style="font-size: 26px; font-weight: bold; color: #0f172a; font-family: 'DejaVu Sans Mono', 'Courier New', monospace;">
                                                    <t t-esc="'{:,.2f}'.format(report_data.get('expense_total', 0))"/>
                                                </div>
                                                <div style="font-size: 11px; font-weight: bold; color: #dc2626 !important; margin-top: 8px; -webkit-print-color-adjust: exact !important;">Costs</div>
                                            </div>
                                        </td>
                                        <!-- Profit Card -->
                                        <td style="width: 33%; vertical-align: top;">
                                            <div style="background: #f8fafc !important; border: 1px solid #e2e8f0; border-radius: 10px; padding: 24px; text-align: center; border-top: 4px solid #059669 !important; -webkit-print-color-adjust: exact !important;">
                                                <div style="font-size: 10px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Net Profit</div>
                                                <div style="font-size: 26px; font-weight: bold; color: #0f172a; font-family: 'DejaVu Sans Mono', 'Courier New', monospace;">
                                                    <t t-esc="'{:,.2f}'.format(report_data.get('net_profit', 0))"/>
                                                </div>
                                                <t t-set="margin_pct" t-value="(report_data.get('net_profit', 0) / report_data.get('income_total', 1) * 100) if report_data.get('income_total', 0) > 0 else 0"/>
                                                <div t-attf-style="font-size: 11px; font-weight: bold; margin-top: 8px; color: #{report_data.get('net_profit', 0) >= 0 and '#059669' or '#dc2626'} !important; -webkit-print-color-adjust: exact !important;">
                                                    <t t-esc="'{:.1f}'.format(margin_pct)"/>% Margin
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </t>

                            <t t-if="doc.report_type == 'bs'">
                                <table style="width: 100%; border-collapse: separate; border-spacing: 16px 0; margin-bottom: 30px;">
                                    <tr>
                                        <!-- Assets Card -->
                                        <td style="width: 33%; vertical-align: top;">
                                            <div style="background: #f8fafc !important; border: 1px solid #e2e8f0; border-radius: 10px; padding: 24px; text-align: center; border-top: 4px solid #3b82f6 !important; -webkit-print-color-adjust: exact !important;">
                                                <div style="font-size: 10px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Total Assets</div>
                                                <div style="font-size: 26px; font-weight: bold; color: #0f172a; font-family: 'DejaVu Sans Mono', 'Courier New', monospace;">
                                                    <t t-esc="'{:,.2f}'.format(report_data.get('asset_total', 0))"/>
                                                </div>
                                            </div>
                                        </td>
                                        <!-- Liabilities Card -->
                                        <td style="width: 33%; vertical-align: top;">
                                            <div style="background: #f8fafc !important; border: 1px solid #e2e8f0; border-radius: 10px; padding: 24px; text-align: center; border-top: 4px solid #d97706 !important; -webkit-print-color-adjust: exact !important;">
                                                <div style="font-size: 10px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Total Liabilities</div>
                                                <div style="font-size: 26px; font-weight: bold; color: #0f172a; font-family: 'DejaVu Sans Mono', 'Courier New', monospace;">
                                                    <t t-esc="'{:,.2f}'.format(report_data.get('liability_total', 0))"/>
                                                </div>
                                            </div>
                                        </td>
                                        <!-- Equity Card -->
                                        <td style="width: 33%; vertical-align: top;">
                                            <div style="background: #f8fafc !important; border: 1px solid #e2e8f0; border-radius: 10px; padding: 24px; text-align: center; border-top: 4px solid #059669 !important; -webkit-print-color-adjust: exact !important;">
                                                <div style="font-size: 10px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Shareholders' Equity</div>
                                                <div style="font-size: 26px; font-weight: bold; color: #0f172a; font-family: 'DejaVu Sans Mono', 'Courier New', monospace;">
                                                    <t t-esc="'{:,.2f}'.format(report_data.get('equity_total', 0))"/>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </t>

                            <!-- Cover Footer with Meta Info -->
                            <div style="padding-top: 30px; border-top: 1px solid #e2e8f0; margin-top: 40px;">
                                <table style="width: 100%;">
                                    <tr>
                                        <td style="vertical-align: bottom;">
                                            <table style="border-spacing: 40px 0; border-collapse: separate;">
                                                <tr>
                                                    <td>
                                                        <div style="font-size: 10px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px;">Period</div>
                                                        <div style="font-size: 13px; font-weight: 500; color: #1e293b; margin-top: 4px;">
                                                            <t t-if="report_data.get('date_from') and report_data.get('date_to')">
                                                                <t t-esc="report_data['date_from']"/> to <t t-esc="report_data['date_to']"/>
                                                            </t>
                                                            <t t-else="">
                                                                As of <t t-esc="report_data.get('date_to', 'Current Date')"/>
                                                            </t>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div style="font-size: 10px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px;">Prepared By</div>
                                                        <div style="font-size: 13px; font-weight: 500; color: #1e293b; margin-top: 4px;"><t t-esc="report_data.get('user', 'System')"/></div>
                                                    </td>
                                                    <td>
                                                        <div style="font-size: 10px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px;">Target Moves</div>
                                                        <div style="font-size: 13px; font-weight: 500; color: #1e293b; margin-top: 4px;"><t t-esc="report_data.get('target_move', 'Posted')"/></div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                        <td style="text-align: right; vertical-align: bottom;">
                                            <div style="background: #0f172a !important; color: #ffffff; padding: 6px 14px; border-radius: 4px; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; display: inline-block; -webkit-print-color-adjust: exact !important;">Confidential</div>
                                            <div style="font-size: 10px; color: #94a3b8; margin-top: 8px;">
                                                Generated: <t t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M')"/>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ================================================
                         PAGE 2: FINANCIAL STATEMENT DETAIL
                         ================================================ -->
                    <div class="page ops-report-container" style="background: #ffffff !important; -webkit-print-color-adjust: exact !important;">

                        <!-- Page Header -->
                        <table class="ops-page-header" style="width: 100%; border-bottom: 3px solid #1e293b; padding-bottom: 12px; margin-bottom: 25px; -webkit-print-color-adjust: exact !important;">
                            <tr>
                                <td class="ops-page-header-left" style="vertical-align: middle; width: 70%;">
                                    <span class="ops-header-logo" style="display: inline-block; width: 36px; height: 36px; background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%); border-radius: 6px; text-align: center; line-height: 36px; font-size: 18px; font-weight: bold; color: #ffffff; vertical-align: middle; margin-right: 10px; -webkit-print-color-adjust: exact !important;">
                                        <t t-esc="(report_data.get('company', 'O') or 'O')[0]"/>
                                    </span>
                                    <span class="ops-header-info" style="display: inline-block; vertical-align: middle;">
                                        <span class="ops-header-company" style="font-size: 14px; font-weight: bold; color: #1e293b; display: block;"><t t-esc="report_data.get('company', 'Company')"/></span>
                                        <span class="ops-header-subtitle" style="font-size: 10px; color: #94a3b8;">Consolidated Financial Statements</span>
                                    </span>
                                </td>
                                <td class="ops-page-number-box" style="vertical-align: middle; text-align: right; width: 30%;">
                                    <span class="ops-page-number" style="font-size: 11px; font-weight: 500; color: #94a3b8;">OPS Matrix Report</span><br/>
                                    <span class="ops-page-date" style="font-size: 10px; color: #94a3b8;"><t t-esc="report_data.get('branch', 'All Branches')"/></span>
                                </td>
                            </tr>
                        </table>

                        <!-- Statement Title Section -->
                        <div class="ops-statement-title-section" style="margin-bottom: 25px; text-align: center;">
                            <h2 class="ops-statement-title" style="font-family: Georgia, 'Times New Roman', serif; font-size: 24px; font-weight: bold; color: #1e293b; margin: 0 0 5px 0;"><t t-esc="report_data.get('title', 'Financial Report')"/></h2>
                            <div class="ops-statement-subtitle" style="font-size: 12px; color: #475569;">OPS Matrix Financial Intelligence</div>
                            <span class="ops-statement-period" style="display: inline-block; margin-top: 10px; padding: 5px 15px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 15px; font-size: 11px; font-weight: 500; color: #475569;">
                                <t t-if="report_data.get('date_from') and report_data.get('date_to')">
                                    For the Period <t t-esc="report_data['date_from']"/> to <t t-esc="report_data['date_to']"/>
                                </t>
                                <t t-else="">
                                    As of <t t-esc="report_data.get('date_to', 'Current Date')"/>
                                </t>
                            </span>
                        </div>

                        <!-- Performance Alerts (P&amp;L Only) -->
                        <t t-if="doc.report_type == 'pl'">
                            <t t-set="margin_pct" t-value="(report_data.get('net_profit', 0) / report_data.get('income_total', 1) * 100) if report_data.get('income_total', 0) > 0 else 0"/>

                            <t t-if="report_data.get('net_profit', 0) &lt; 0">
                                <div class="ops-alert ops-alert-danger" style="padding: 12px 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #dc2626 !important; background-color: rgba(220, 38, 38, 0.1) !important; color: #991b1b; -webkit-print-color-adjust: exact !important;">
                                    <strong>Critical Warning:</strong> Negative net profit detected!
                                    <strong><t t-esc="'{:,.2f}'.format(report_data['net_profit'])"/></strong><br/>
                                    <small>Immediate review required. Expenses exceed revenue in this period.</small>
                                </div>
                            </t>
                            <t t-elif="report_data.get('net_profit', 0) >= 0 and margin_pct &lt; 5">
                                <div class="ops-alert ops-alert-warning" style="padding: 12px 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #d97706 !important; background-color: rgba(217, 119, 6, 0.1) !important; color: #92400e; -webkit-print-color-adjust: exact !important;">
                                    <strong>Caution:</strong> Profit margin below 5% threshold.
                                    Current margin: <strong><t t-esc="'{:.1f}'.format(margin_pct)"/>%</strong>
                                </div>
                            </t>
                            <t t-elif="report_data.get('net_profit', 0) > 0 and margin_pct >= 20">
                                <div class="ops-alert ops-alert-success" style="padding: 12px 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #059669 !important; background-color: rgba(5, 150, 105, 0.1) !important; color: #065f46; -webkit-print-color-adjust: exact !important;">
                                    <strong>Excellent Performance:</strong> Strong profit margin of <strong><t t-esc="'{:.1f}'.format(margin_pct)"/>%</strong>!
                                </div>
                            </t>
                        </t>

                        <!-- Report Content - General Ledger -->
                        <t t-if="doc.report_type == 'gl'">
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <div class="ops-section-header-row" style="background: #1e293b !important; padding: 10px 15px; border-radius: 6px 6px 0 0; -webkit-print-color-adjust: exact !important;">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td class="ops-section-title-text" style="font-size: 12px; font-weight: bold; color: #ffffff !important; text-transform: uppercase; letter-spacing: 1px;">General Ledger</td>
                                            <td class="ops-section-amount" style="font-family: 'DejaVu Sans Mono', monospace; font-size: 13px; font-weight: bold; color: #ffffff !important; text-align: right;"><t t-esc="len(report_data.get('lines', []))"/> Entries</td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-top: none;">
                                    <thead>
                                        <tr>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Date</th>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Entry</th>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Account</th>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Partner</th>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Label</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Debit</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Credit</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Balance</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('lines', [])" t-as="line">
                                            <tr>
                                                <td style="padding: 10px 15px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('date', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('move_name', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('account', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('partner', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('label', '')"/></td>
                                                <td t-attf-style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #{line.get('debit', 0) > 0 and '#059669' or '#1e293b'} !important; -webkit-print-color-adjust: exact !important;">
                                                    <t t-esc="'{:,.2f}'.format(line.get('debit', 0))"/>
                                                </td>
                                                <td t-attf-style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #{line.get('credit', 0) > 0 and '#dc2626' or '#1e293b'} !important; -webkit-print-color-adjust: exact !important;">
                                                    <t t-esc="'{:,.2f}'.format(line.get('credit', 0))"/>
                                                </td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; font-weight: bold;">
                                                    <t t-esc="'{:,.2f}'.format(line.get('balance', 0))"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                        </t>

                        <!-- Report Content - P&amp;L -->
                        <t t-if="doc.report_type == 'pl'">
                            <!-- INCOME SECTION -->
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <div class="ops-section-header-row income" style="background: #1e40af !important; padding: 10px 15px; border-radius: 6px 6px 0 0; -webkit-print-color-adjust: exact !important;">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td class="ops-section-title-text" style="font-size: 12px; font-weight: bold; color: #ffffff !important; text-transform: uppercase; letter-spacing: 1px;">Revenue</td>
                                            <td class="ops-section-amount" style="font-family: 'DejaVu Sans Mono', monospace; font-size: 13px; font-weight: bold; color: #ffffff !important; text-align: right;"><t t-esc="'{:,.2f}'.format(report_data.get('income_total', 0))"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-top: none;">
                                    <thead>
                                        <tr>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Account</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('income_lines', [])" t-as="line">
                                            <tr>
                                                <td class="indent-1" style="padding: 10px 15px 10px 30px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('account', '')"/></td>
                                                <td class="text-end amount-positive" style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #059669 !important; -webkit-print-color-adjust: exact !important;">
                                                    <t t-esc="'{:,.2f}'.format(line.get('amount', 0))"/>
                                                </td>
                                            </tr>
                                        </t>
                                        <tr class="subtotal-row">
                                            <td style="padding: 12px 15px; font-size: 11px; font-weight: bold; background: #f8fafc !important; border-bottom: 2px solid #cbd5e1; -webkit-print-color-adjust: exact !important;"><strong>Total Revenue</strong></td>
                                            <td style="padding: 12px 15px; font-size: 10px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #f8fafc !important; border-bottom: 2px solid #cbd5e1; -webkit-print-color-adjust: exact !important;"><strong><t t-esc="'{:,.2f}'.format(report_data.get('income_total', 0))"/></strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- EXPENSES SECTION -->
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <div class="ops-section-header-row expense" style="background: #b91c1c !important; padding: 10px 15px; border-radius: 6px 6px 0 0; -webkit-print-color-adjust: exact !important;">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td class="ops-section-title-text" style="font-size: 12px; font-weight: bold; color: #ffffff !important; text-transform: uppercase; letter-spacing: 1px;">Expenses</td>
                                            <td class="ops-section-amount" style="font-family: 'DejaVu Sans Mono', monospace; font-size: 13px; font-weight: bold; color: #ffffff !important; text-align: right;"><t t-esc="'{:,.2f}'.format(report_data.get('expense_total', 0))"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-top: none;">
                                    <thead>
                                        <tr>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Account</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('expense_lines', [])" t-as="line">
                                            <tr>
                                                <td class="indent-1" style="padding: 10px 15px 10px 30px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('account', '')"/></td>
                                                <td class="text-end amount-negative" style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #dc2626 !important; -webkit-print-color-adjust: exact !important;">
                                                    <t t-esc="'{:,.2f}'.format(line.get('amount', 0))"/>
                                                </td>
                                            </tr>
                                        </t>
                                        <tr class="subtotal-row">
                                            <td style="padding: 12px 15px; font-size: 11px; font-weight: bold; background: #f8fafc !important; border-bottom: 2px solid #cbd5e1; -webkit-print-color-adjust: exact !important;"><strong>Total Expenses</strong></td>
                                            <td style="padding: 12px 15px; font-size: 10px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #f8fafc !important; border-bottom: 2px solid #cbd5e1; -webkit-print-color-adjust: exact !important;"><strong><t t-esc="'{:,.2f}'.format(report_data.get('expense_total', 0))"/></strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- SUMMARY - Grand Totals -->
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 8px; overflow: hidden;">
                                    <tbody>
                                        <tr class="subtotal-row">
                                            <td style="padding: 12px 15px; font-size: 11px; font-weight: bold; background: #f8fafc !important; border-bottom: 2px solid #cbd5e1; -webkit-print-color-adjust: exact !important;"><strong>Gross Profit</strong></td>
                                            <td style="padding: 12px 15px; font-size: 10px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #f8fafc !important; border-bottom: 2px solid #cbd5e1; -webkit-print-color-adjust: exact !important;">
                                                <t t-set="gp" t-value="report_data.get('gross_profit', 0)"/>
                                                <strong t-attf-style="color: #{gp >= 0 and '#059669' or '#dc2626'} !important; -webkit-print-color-adjust: exact !important;">
                                                    <t t-esc="'{:,.2f}'.format(gp)"/>
                                                </strong>
                                            </td>
                                        </tr>
                                        <tr class="grand-total-row">
                                            <td style="padding: 14px 15px; font-size: 12px; font-weight: bold; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><strong>NET PROFIT / (LOSS)</strong></td>
                                            <td style="padding: 14px 15px; font-size: 13px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;">
                                                <strong><t t-esc="'{:,.2f}'.format(report_data.get('net_profit', 0))"/></strong>
                                                <t t-if="report_data.get('net_profit', 0) &lt; 0"> (LOSS)</t>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Totals Summary Box -->
                            <t t-set="margin_pct" t-value="(report_data.get('net_profit', 0) / report_data.get('income_total', 1) * 100) if report_data.get('income_total', 0) > 0 else 0"/>
                            <div t-attf-class="ops-totals-summary #{report_data.get('net_profit', 0) >= 0 and 'success' or 'loss'}" t-attf-style="margin-top: 25px; background: #{report_data.get('net_profit', 0) >= 0 and '#047857' or '#991b1b'} !important; border-radius: 8px; padding: 20px 25px; -webkit-print-color-adjust: exact !important;">
                                <table style="width: 100%;">
                                    <tr>
                                        <td class="ops-totals-left" style="width: 40%; vertical-align: middle;">
                                            <div class="ops-totals-label" style="font-size: 10px; font-weight: bold; color: rgba(255, 255, 255, 0.6); text-transform: uppercase; letter-spacing: 1px;">Net Profit Margin</div>
                                            <div class="ops-totals-equation" style="font-size: 12px; color: rgba(255, 255, 255, 0.8); margin-top: 3px;">Net Income / Total Revenue x 100</div>
                                        </td>
                                        <td class="ops-totals-value" style="width: 35%; font-family: 'DejaVu Sans Mono', monospace; font-size: 26px; font-weight: bold; color: #ffffff !important; text-align: center; vertical-align: middle;"><t t-esc="'{:.2f}'.format(margin_pct)"/>%</td>
                                        <td style="width: 25%; text-align: right; vertical-align: middle;">
                                            <div class="ops-totals-badge" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); padding: 8px 14px; border-radius: 6px; text-align: center; display: inline-block;">
                                                <span t-attf-class="ops-badge-icon #{margin_pct >= 10 and '' or 'warning'}" t-attf-style="display: inline-block; width: 20px; height: 20px; background: #{margin_pct >= 10 and '#059669' or '#d97706'} !important; border-radius: 50%; text-align: center; line-height: 20px; color: #ffffff; font-size: 12px; font-weight: bold; -webkit-print-color-adjust: exact !important;">
                                                    <t t-if="margin_pct >= 10">&#10003;</t>
                                                    <t t-else="">!</t>
                                                </span><br/>
                                                <span class="ops-badge-text" style="font-size: 11px; font-weight: bold; color: #ffffff; margin-top: 4px;">
                                                    <t t-if="margin_pct >= 10">Healthy</t>
                                                    <t t-else="">Review</t>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </t>

                        <!-- Report Content - Balance Sheet -->
                        <t t-if="doc.report_type == 'bs'">
                            <!-- ASSETS SECTION -->
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <div class="ops-section-header-row assets" style="background: #1e40af !important; padding: 10px 15px; border-radius: 6px 6px 0 0; -webkit-print-color-adjust: exact !important;">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td class="ops-section-title-text" style="font-size: 12px; font-weight: bold; color: #ffffff !important; text-transform: uppercase; letter-spacing: 1px;">Assets</td>
                                            <td class="ops-section-amount" style="font-family: 'DejaVu Sans Mono', monospace; font-size: 13px; font-weight: bold; color: #ffffff !important; text-align: right;"><t t-esc="'{:,.2f}'.format(report_data.get('asset_total', 0))"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-top: none;">
                                    <thead>
                                        <tr>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Account</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('asset_lines', [])" t-as="line">
                                            <tr>
                                                <td class="indent-1" style="padding: 10px 15px 10px 30px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('account', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace;"><t t-esc="'{:,.2f}'.format(line.get('amount', 0))"/></td>
                                            </tr>
                                        </t>
                                        <tr class="grand-total-row">
                                            <td style="padding: 14px 15px; font-size: 12px; font-weight: bold; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;">TOTAL ASSETS</td>
                                            <td style="padding: 14px 15px; font-size: 13px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><t t-esc="'{:,.2f}'.format(report_data.get('asset_total', 0))"/></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- LIABILITIES SECTION -->
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <div class="ops-section-header-row liabilities" style="background: #b45309 !important; padding: 10px 15px; border-radius: 6px 6px 0 0; -webkit-print-color-adjust: exact !important;">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td class="ops-section-title-text" style="font-size: 12px; font-weight: bold; color: #ffffff !important; text-transform: uppercase; letter-spacing: 1px;">Liabilities</td>
                                            <td class="ops-section-amount" style="font-family: 'DejaVu Sans Mono', monospace; font-size: 13px; font-weight: bold; color: #ffffff !important; text-align: right;"><t t-esc="'{:,.2f}'.format(report_data.get('liability_total', 0))"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-top: none;">
                                    <thead>
                                        <tr>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Account</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('liability_lines', [])" t-as="line">
                                            <tr>
                                                <td class="indent-1" style="padding: 10px 15px 10px 30px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('account', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace;"><t t-esc="'{:,.2f}'.format(abs(line.get('amount', 0)))"/></td>
                                            </tr>
                                        </t>
                                        <tr class="total-row">
                                            <td style="padding: 12px 15px; font-size: 11px; font-weight: bold; background: #1e293b !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;">TOTAL LIABILITIES</td>
                                            <td style="padding: 12px 15px; font-size: 10px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #1e293b !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><t t-esc="'{:,.2f}'.format(report_data.get('liability_total', 0))"/></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- EQUITY SECTION -->
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <div class="ops-section-header-row equity" style="background: #047857 !important; padding: 10px 15px; border-radius: 6px 6px 0 0; -webkit-print-color-adjust: exact !important;">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td class="ops-section-title-text" style="font-size: 12px; font-weight: bold; color: #ffffff !important; text-transform: uppercase; letter-spacing: 1px;">Shareholders' Equity</td>
                                            <td class="ops-section-amount" style="font-family: 'DejaVu Sans Mono', monospace; font-size: 13px; font-weight: bold; color: #ffffff !important; text-align: right;"><t t-esc="'{:,.2f}'.format(report_data.get('equity_total', 0))"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-top: none;">
                                    <thead>
                                        <tr>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Account</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('equity_lines', [])" t-as="line">
                                            <tr>
                                                <td class="indent-1" style="padding: 10px 15px 10px 30px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('account', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace;"><t t-esc="'{:,.2f}'.format(abs(line.get('amount', 0)))"/></td>
                                            </tr>
                                        </t>
                                        <tr class="grand-total-row">
                                            <td style="padding: 14px 15px; font-size: 12px; font-weight: bold; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;">TOTAL SHAREHOLDERS' EQUITY</td>
                                            <td style="padding: 14px 15px; font-size: 13px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><t t-esc="'{:,.2f}'.format(report_data.get('equity_total', 0))"/></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Totals Summary Box -->
                            <t t-set="balance_diff" t-value="report_data.get('asset_total', 0) - (report_data.get('liability_total', 0) + report_data.get('equity_total', 0))"/>
                            <div class="ops-totals-summary" style="margin-top: 25px; background: #0f172a !important; border-radius: 8px; padding: 20px 25px; -webkit-print-color-adjust: exact !important;">
                                <table style="width: 100%;">
                                    <tr>
                                        <td class="ops-totals-left" style="width: 40%; vertical-align: middle;">
                                            <div class="ops-totals-label" style="font-size: 10px; font-weight: bold; color: rgba(255, 255, 255, 0.6); text-transform: uppercase; letter-spacing: 1px;">Total Liabilities + Equity</div>
                                            <div class="ops-totals-equation" style="font-size: 12px; color: rgba(255, 255, 255, 0.8); margin-top: 3px;">Assets = Liabilities + Shareholders' Equity</div>
                                        </td>
                                        <td class="ops-totals-value" style="width: 35%; font-family: 'DejaVu Sans Mono', monospace; font-size: 26px; font-weight: bold; color: #ffffff !important; text-align: center; vertical-align: middle;"><t t-esc="'{:,.2f}'.format(report_data.get('liability_total', 0) + report_data.get('equity_total', 0))"/></td>
                                        <td style="width: 25%; text-align: right; vertical-align: middle;">
                                            <div class="ops-totals-badge" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); padding: 8px 14px; border-radius: 6px; text-align: center; display: inline-block;">
                                                <span t-attf-class="ops-badge-icon" t-attf-style="display: inline-block; width: 20px; height: 20px; background: #{abs(balance_diff) &lt; 0.01 and '#059669' or '#dc2626'} !important; border-radius: 50%; text-align: center; line-height: 20px; color: #ffffff; font-size: 12px; font-weight: bold; -webkit-print-color-adjust: exact !important;">
                                                    <t t-if="abs(balance_diff) &lt; 0.01">&#10003;</t>
                                                    <t t-else="">!</t>
                                                </span><br/>
                                                <span class="ops-badge-text" style="font-size: 11px; font-weight: bold; color: #ffffff; margin-top: 4px;">
                                                    <t t-if="abs(balance_diff) &lt; 0.01">Balanced</t>
                                                    <t t-else="">Unbalanced</t>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </t>

                        <!-- Report Content - Trial Balance -->
                        <t t-if="doc.report_type == 'tb'">
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <div class="ops-section-header-row" style="background: #1e293b !important; padding: 10px 15px; border-radius: 6px 6px 0 0; -webkit-print-color-adjust: exact !important;">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td class="ops-section-title-text" style="font-size: 12px; font-weight: bold; color: #ffffff !important; text-transform: uppercase; letter-spacing: 1px;">Trial Balance</td>
                                            <td class="ops-section-amount" style="font-family: 'DejaVu Sans Mono', monospace; font-size: 13px; font-weight: bold; color: #ffffff !important; text-align: right;"><t t-esc="len(report_data.get('lines', []))"/> Accounts</td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-top: none;">
                                    <thead>
                                        <tr>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Account</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Debit</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Credit</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Balance</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('lines', [])" t-as="line">
                                            <tr>
                                                <td style="padding: 10px 15px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('account', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #059669 !important; -webkit-print-color-adjust: exact !important;"><t t-esc="'{:,.2f}'.format(line.get('debit', 0))"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #dc2626 !important; -webkit-print-color-adjust: exact !important;"><t t-esc="'{:,.2f}'.format(line.get('credit', 0))"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; font-weight: bold;"><t t-esc="'{:,.2f}'.format(line.get('balance', 0))"/></td>
                                            </tr>
                                        </t>
                                        <tr class="grand-total-row">
                                            <td style="padding: 14px 15px; font-size: 12px; font-weight: bold; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><strong>TOTAL</strong></td>
                                            <td style="padding: 14px 15px; font-size: 13px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><strong><t t-esc="'{:,.2f}'.format(report_data.get('total_debit', 0))"/></strong></td>
                                            <td style="padding: 14px 15px; font-size: 13px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><strong><t t-esc="'{:,.2f}'.format(report_data.get('total_credit', 0))"/></strong></td>
                                            <td style="padding: 14px 15px; font-size: 13px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><strong><t t-esc="'{:,.2f}'.format(report_data.get('total_debit', 0) - report_data.get('total_credit', 0))"/></strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </t>

                        <!-- Report Content - Aged Partner -->
                        <t t-if="doc.report_type == 'aged'">
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <div class="ops-section-header-row liabilities" style="background: #b45309 !important; padding: 10px 15px; border-radius: 6px 6px 0 0; -webkit-print-color-adjust: exact !important;">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td class="ops-section-title-text" style="font-size: 12px; font-weight: bold; color: #ffffff !important; text-transform: uppercase; letter-spacing: 1px;">Aged Partner Balance</td>
                                            <td class="ops-section-amount" style="font-family: 'DejaVu Sans Mono', monospace; font-size: 13px; font-weight: bold; color: #ffffff !important; text-align: right;"><t t-esc="len(report_data.get('lines', []))"/> Partners</td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-top: none;">
                                    <thead>
                                        <tr>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Partner</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Debit</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Credit</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Balance</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('lines', [])" t-as="line">
                                            <tr>
                                                <td style="padding: 10px 15px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('partner', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #059669 !important; -webkit-print-color-adjust: exact !important;"><t t-esc="'{:,.2f}'.format(line.get('debit', 0))"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #dc2626 !important; -webkit-print-color-adjust: exact !important;"><t t-esc="'{:,.2f}'.format(line.get('credit', 0))"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; font-weight: bold;"><t t-esc="'{:,.2f}'.format(line.get('balance', 0))"/></td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                        </t>

                        <!-- Report Content - Cash Flow -->
                        <t t-if="doc.report_type == 'cf'">
                            <div class="ops-financial-section" style="margin-bottom: 20px;">
                                <div class="ops-section-header-row income" style="background: #1e40af !important; padding: 10px 15px; border-radius: 6px 6px 0 0; -webkit-print-color-adjust: exact !important;">
                                    <table style="width: 100%;">
                                        <tr>
                                            <td class="ops-section-title-text" style="font-size: 12px; font-weight: bold; color: #ffffff !important; text-transform: uppercase; letter-spacing: 1px;">Cash Flow Statement</td>
                                            <td class="ops-section-amount" style="font-family: 'DejaVu Sans Mono', monospace; font-size: 13px; font-weight: bold; color: #ffffff !important; text-align: right;"><t t-esc="'{:,.2f}'.format(report_data.get('net_cash_flow', 0))"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="ops-financial-table" style="width: 100%; border-collapse: collapse; background: #ffffff; border: 1px solid #e2e8f0; border-top: none;">
                                    <thead>
                                        <tr>
                                            <th style="padding: 10px 15px; text-align: left; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Account</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Inflow</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Outflow</th>
                                            <th style="padding: 10px 15px; text-align: right; font-size: 9px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; background: #f8fafc !important; border-bottom: 1px solid #e2e8f0; -webkit-print-color-adjust: exact !important;">Net</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="report_data.get('lines', [])" t-as="line">
                                            <tr>
                                                <td style="padding: 10px 15px; font-size: 11px; color: #1e293b; border-bottom: 1px dotted #cbd5e1;"><t t-esc="line.get('account', '')"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #059669 !important; -webkit-print-color-adjust: exact !important;"><t t-esc="'{:,.2f}'.format(line.get('inflow', 0))"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; color: #dc2626 !important; -webkit-print-color-adjust: exact !important;"><t t-esc="'{:,.2f}'.format(line.get('outflow', 0))"/></td>
                                                <td style="padding: 10px 15px; font-size: 10px; border-bottom: 1px dotted #cbd5e1; text-align: right; font-family: 'DejaVu Sans Mono', monospace; font-weight: bold;"><t t-esc="'{:,.2f}'.format(line.get('net', 0))"/></td>
                                            </tr>
                                        </t>
                                        <tr class="grand-total-row">
                                            <td style="padding: 14px 15px; font-size: 12px; font-weight: bold; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><strong>NET CASH FLOW</strong></td>
                                            <td style="padding: 14px 15px; font-size: 13px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><strong><t t-esc="'{:,.2f}'.format(report_data.get('total_inflow', 0))"/></strong></td>
                                            <td style="padding: 14px 15px; font-size: 13px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><strong><t t-esc="'{:,.2f}'.format(report_data.get('total_outflow', 0))"/></strong></td>
                                            <td style="padding: 14px 15px; font-size: 13px; font-weight: bold; text-align: right; font-family: 'DejaVu Sans Mono', monospace; background: #0f172a !important; color: #ffffff !important; -webkit-print-color-adjust: exact !important;"><strong><t t-esc="'{:,.2f}'.format(report_data.get('net_cash_flow', 0))"/></strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </t>

                        <!-- Notes Section -->
                        <div class="ops-notes-section" style="margin-top: 25px; padding: 15px 20px; background: #f8fafc !important; border: 1px solid #e2e8f0; border-left: 4px solid #3b82f6 !important; border-radius: 0 6px 6px 0; -webkit-print-color-adjust: exact !important;">
                            <div class="ops-notes-title" style="font-size: 10px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Notes to Financial Statements</div>
                            <ul class="ops-notes-list" style="list-style: none; margin: 0; padding: 0;">
                                <li style="font-size: 10px; color: #475569; padding: 3px 0 3px 15px; position: relative;">This report was generated by the OPS Matrix Financial Reporting System</li>
                                <li style="font-size: 10px; color: #475569; padding: 3px 0 3px 15px; position: relative;">All figures are in the company's base currency</li>
                                <li style="font-size: 10px; color: #475569; padding: 3px 0 3px 15px; position: relative;">For audit trail purposes, all journal entries are traceable via move IDs</li>
                                <li style="font-size: 10px; color: #475569; padding: 3px 0 3px 15px; position: relative;">Target Moves: <t t-esc="report_data.get('target_move', 'Posted')"/></li>
                            </ul>
                        </div>

                        <!-- Page Footer -->
                        <div class="ops-page-footer" style="margin-top: 30px; padding-top: 12px; border-top: 1px solid #e2e8f0;">
                            <table style="width: 100%;">
                                <tr>
                                    <td class="ops-footer-text" style="font-size: 9px; color: #94a3b8;">
                                        Prepared by: <t t-esc="report_data.get('user', 'System')"/> |
                                        Generated: <t t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M')"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <span class="ops-footer-confidential" style="font-size: 8px; font-weight: bold; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px; padding: 3px 8px; background: #f8fafc !important; border: 1px solid #e2e8f0; border-radius: 3px; -webkit-print-color-adjust: exact !important;">Confidential</span>
                                    </td>
                                </tr>
                            </table>
                        </div>

                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
