<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- ============================================================= -->
        <!-- SALES KPIs (8) -->
        <!-- ============================================================= -->

        <record id="kpi_sales_revenue_mtd" model="ops.kpi">
            <field name="name">Revenue MTD</field>
            <field name="code">SALES_REVENUE_MTD</field>
            <field name="description">Total sales revenue for current month</field>
            <field name="sequence">10</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_total</field>
            <field name="domain_filter">[('state', 'in', ['sale', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-dollar-sign</field>
            <field name="color">#10b981</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P02,P03,P04,P05,P06,P09,P10</field>
        </record>

        <record id="kpi_sales_revenue_ytd" model="ops.kpi">
            <field name="name">Revenue YTD</field>
            <field name="code">SALES_REVENUE_YTD</field>
            <field name="description">Total sales revenue for current year</field>
            <field name="sequence">11</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_total</field>
            <field name="domain_filter">[('state', 'in', ['sale', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_year</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-chart-line</field>
            <field name="color">#059669</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P02,P03,P04,P05,P06</field>
        </record>

        <record id="kpi_sales_orders_mtd" model="ops.kpi">
            <field name="name">Orders MTD</field>
            <field name="code">SALES_ORDERS_MTD</field>
            <field name="description">Number of confirmed sales orders this month</field>
            <field name="sequence">12</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', 'in', ['sale', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-file-invoice</field>
            <field name="color">#3b82f6</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P02,P03,P04,P05,P06</field>
        </record>

        <record id="kpi_sales_avg_order" model="ops.kpi">
            <field name="name">Avg Order Value</field>
            <field name="code">SALES_AVG_ORDER</field>
            <field name="description">Average value per sales order</field>
            <field name="sequence">13</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">average</field>
            <field name="measure_field">amount_total</field>
            <field name="domain_filter">[('state', 'in', ['sale', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-balance-scale</field>
            <field name="color">#8b5cf6</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P04,P05,P06</field>
        </record>

        <record id="kpi_sales_gross_margin" model="ops.kpi">
            <field name="name">Gross Margin %</field>
            <field name="code">SALES_GROSS_MARGIN</field>
            <field name="description">Gross margin percentage on sales</field>
            <field name="sequence">14</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">average</field>
            <field name="measure_field">margin</field>
            <field name="domain_filter">[('state', 'in', ['sale', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">percentage</field>
            <field name="icon">fa-percentage</field>
            <field name="color">#f59e0b</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="requires_margin_access" eval="True"/>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P04,P05,P06,P09</field>
        </record>

        <record id="kpi_sales_quotations" model="ops.kpi">
            <field name="name">Open Quotations</field>
            <field name="code">SALES_QUOTATIONS</field>
            <field name="description">Number of draft/sent quotations</field>
            <field name="sequence">15</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', 'in', ['draft', 'sent'])]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-file-alt</field>
            <field name="color">#f97316</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P04,P05,P06</field>
        </record>

        <record id="kpi_sales_quotation_value" model="ops.kpi">
            <field name="name">Pipeline Value</field>
            <field name="code">SALES_QUOTATION_VALUE</field>
            <field name="description">Total value of quotations in pipeline</field>
            <field name="sequence">16</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_total</field>
            <field name="domain_filter">[('state', 'in', ['draft', 'sent'])]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-funnel-dollar</field>
            <field name="color">#06b6d4</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P04,P05,P06</field>
        </record>

        <record id="kpi_sales_pending_approval" model="ops.kpi">
            <field name="name">SO Pending Approval</field>
            <field name="code">SALES_PENDING_APPROVAL</field>
            <field name="description">Sales orders awaiting approval</field>
            <field name="sequence">17</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', '=', 'sent')]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-hourglass-half</field>
            <field name="color">#ef4444</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">down_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P04,P05,P06</field>
        </record>

        <!-- ============================================================= -->
        <!-- PURCHASE KPIs (5) -->
        <!-- ============================================================= -->

        <record id="kpi_purchase_total_mtd" model="ops.kpi">
            <field name="name">Purchases MTD</field>
            <field name="code">PURCHASE_TOTAL_MTD</field>
            <field name="description">Total purchase value this month</field>
            <field name="sequence">20</field>
            <field name="category">purchase</field>
            <field name="source_model">purchase.order</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_total</field>
            <field name="domain_filter">[('state', 'in', ['purchase', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-shopping-cart</field>
            <field name="color">#8b5cf6</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">neutral</field>
            <field name="requires_cost_access" eval="True"/>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P04,P05,P07</field>
        </record>

        <record id="kpi_purchase_orders_mtd" model="ops.kpi">
            <field name="name">PO Count MTD</field>
            <field name="code">PURCHASE_ORDERS_MTD</field>
            <field name="description">Number of purchase orders this month</field>
            <field name="sequence">21</field>
            <field name="category">purchase</field>
            <field name="source_model">purchase.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', 'in', ['purchase', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-clipboard-list</field>
            <field name="color">#3b82f6</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P04,P05,P07</field>
        </record>

        <record id="kpi_purchase_pending_rfq" model="ops.kpi">
            <field name="name">Pending RFQs</field>
            <field name="code">PURCHASE_PENDING_RFQ</field>
            <field name="description">Draft RFQs awaiting action</field>
            <field name="sequence">22</field>
            <field name="category">purchase</field>
            <field name="source_model">purchase.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', 'in', ['draft', 'sent'])]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-file-alt</field>
            <field name="color">#f59e0b</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P05,P07</field>
        </record>

        <record id="kpi_purchase_pending_approval" model="ops.kpi">
            <field name="name">PO Pending Approval</field>
            <field name="code">PURCHASE_PENDING_APPROVAL</field>
            <field name="description">Purchase orders awaiting approval</field>
            <field name="sequence">23</field>
            <field name="category">purchase</field>
            <field name="source_model">purchase.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', '=', 'to approve')]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-hourglass-half</field>
            <field name="color">#ef4444</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">down_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P04,P05,P07</field>
        </record>

        <record id="kpi_purchase_pending_receipts" model="ops.kpi">
            <field name="name">Pending Receipts</field>
            <field name="code">PURCHASE_PENDING_RECEIPTS</field>
            <field name="description">Purchase orders pending receipt</field>
            <field name="sequence">24</field>
            <field name="category">purchase</field>
            <field name="source_model">stock.picking</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('picking_type_code', '=', 'incoming'), ('state', 'in', ['assigned', 'waiting', 'confirmed'])]</field>
            <field name="date_field">scheduled_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-truck-loading</field>
            <field name="color">#06b6d4</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P05,P07,P08</field>
        </record>

        <!-- ============================================================= -->
        <!-- ACCOUNTS RECEIVABLE KPIs (3) -->
        <!-- ============================================================= -->

        <record id="kpi_ar_total" model="ops.kpi">
            <field name="name">Total Receivables</field>
            <field name="code">AR_TOTAL</field>
            <field name="description">Total outstanding customer invoices</field>
            <field name="sequence">30</field>
            <field name="category">receivable</field>
            <field name="source_model">account.move</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_residual</field>
            <field name="domain_filter">[('move_type', '=', 'out_invoice'), ('state', '=', 'posted'), ('payment_state', 'in', ['not_paid', 'partial'])]</field>
            <field name="date_field">invoice_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-hand-holding-usd</field>
            <field name="color">#06b6d4</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P02,P03,P04,P05,P06,P09,P13</field>
        </record>

        <record id="kpi_ar_overdue" model="ops.kpi">
            <field name="name">Overdue Receivables</field>
            <field name="code">AR_OVERDUE</field>
            <field name="description">Customer invoices past due date</field>
            <field name="sequence">31</field>
            <field name="category">receivable</field>
            <field name="source_model">account.move</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_residual</field>
            <field name="domain_filter">[('move_type', '=', 'out_invoice'), ('state', '=', 'posted'), ('payment_state', 'in', ['not_paid', 'partial']), ('invoice_date_due', '&lt;', (context_today()).strftime('%Y-%m-%d'))]</field>
            <field name="date_field">invoice_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-exclamation-triangle</field>
            <field name="color">#dc2626</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">down_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P02,P03,P04,P05,P06,P09,P13,P15</field>
        </record>

        <record id="kpi_ar_collected_mtd" model="ops.kpi">
            <field name="name">Collected MTD</field>
            <field name="code">AR_COLLECTED_MTD</field>
            <field name="description">Total collections this month</field>
            <field name="sequence">32</field>
            <field name="category">receivable</field>
            <field name="source_model">account.payment</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount</field>
            <field name="domain_filter">[('payment_type', '=', 'inbound'), ('state', '=', 'posted')]</field>
            <field name="date_field">date</field>
            <field name="default_period">this_month</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-money-bill-wave</field>
            <field name="color">#10b981</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P05,P06,P09,P13</field>
        </record>

        <!-- ============================================================= -->
        <!-- ACCOUNTS PAYABLE KPIs (3) -->
        <!-- ============================================================= -->

        <record id="kpi_ap_total" model="ops.kpi">
            <field name="name">Total Payables</field>
            <field name="code">AP_TOTAL</field>
            <field name="description">Total outstanding vendor bills</field>
            <field name="sequence">40</field>
            <field name="category">payable</field>
            <field name="source_model">account.move</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_residual</field>
            <field name="domain_filter">[('move_type', '=', 'in_invoice'), ('state', '=', 'posted'), ('payment_state', 'in', ['not_paid', 'partial'])]</field>
            <field name="date_field">invoice_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-file-invoice-dollar</field>
            <field name="color">#7c3aed</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">neutral</field>
            <field name="requires_cost_access" eval="True"/>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P02,P03,P04,P05,P09,P14</field>
        </record>

        <record id="kpi_ap_overdue" model="ops.kpi">
            <field name="name">Overdue Payables</field>
            <field name="code">AP_OVERDUE</field>
            <field name="description">Vendor bills past due date</field>
            <field name="sequence">41</field>
            <field name="category">payable</field>
            <field name="source_model">account.move</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_residual</field>
            <field name="domain_filter">[('move_type', '=', 'in_invoice'), ('state', '=', 'posted'), ('payment_state', 'in', ['not_paid', 'partial']), ('invoice_date_due', '&lt;', (context_today()).strftime('%Y-%m-%d'))]</field>
            <field name="date_field">invoice_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-exclamation-circle</field>
            <field name="color">#ef4444</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">down_good</field>
            <field name="requires_cost_access" eval="True"/>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P05,P09,P14</field>
        </record>

        <record id="kpi_ap_due_7_days" model="ops.kpi">
            <field name="name">AP Due (7 Days)</field>
            <field name="code">AP_DUE_7_DAYS</field>
            <field name="description">Payables due in next 7 days</field>
            <field name="sequence">42</field>
            <field name="category">payable</field>
            <field name="source_model">account.move</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_residual</field>
            <field name="domain_filter">[('move_type', '=', 'in_invoice'), ('state', '=', 'posted'), ('payment_state', 'in', ['not_paid', 'partial'])]</field>
            <field name="date_field">invoice_date_due</field>
            <field name="default_period">this_week</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-calendar-alt</field>
            <field name="color">#f59e0b</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="requires_cost_access" eval="True"/>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P05,P07,P09,P14,P15</field>
        </record>

        <!-- ============================================================= -->
        <!-- PDC KPIs (4) -->
        <!-- ============================================================= -->

        <record id="kpi_pdc_recv_registered" model="ops.kpi">
            <field name="name">PDC Holding (Recv)</field>
            <field name="code">PDC_RECV_REGISTERED</field>
            <field name="description">PDC receivables in registered state</field>
            <field name="sequence">50</field>
            <field name="category">pdc</field>
            <field name="source_model">ops.pdc.receivable</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount</field>
            <field name="domain_filter">[('state', '=', 'registered')]</field>
            <field name="date_field">cheque_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-money-check</field>
            <field name="color">#0891b2</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P02,P03,P04,P05,P09,P13,P15</field>
        </record>

        <record id="kpi_pdc_recv_deposited" model="ops.kpi">
            <field name="name">PDC Deposited</field>
            <field name="code">PDC_RECV_DEPOSITED</field>
            <field name="description">PDC receivables deposited in bank</field>
            <field name="sequence">51</field>
            <field name="category">pdc</field>
            <field name="source_model">ops.pdc.receivable</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount</field>
            <field name="domain_filter">[('state', '=', 'deposited')]</field>
            <field name="date_field">deposit_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-university</field>
            <field name="color">#3b82f6</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P05,P09,P13,P15</field>
        </record>

        <record id="kpi_pdc_recv_bounced" model="ops.kpi">
            <field name="name">PDC Bounced</field>
            <field name="code">PDC_RECV_BOUNCED</field>
            <field name="description">Bounced PDC receivables</field>
            <field name="sequence">52</field>
            <field name="category">pdc</field>
            <field name="source_model">ops.pdc.receivable</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount</field>
            <field name="domain_filter">[('state', '=', 'bounced')]</field>
            <field name="date_field">bounced_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-times-circle</field>
            <field name="color">#dc2626</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">down_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P05,P09,P13</field>
        </record>

        <record id="kpi_pdc_pay_issued" model="ops.kpi">
            <field name="name">PDC Issued (Pay)</field>
            <field name="code">PDC_PAY_ISSUED</field>
            <field name="description">PDC payables issued to vendors</field>
            <field name="sequence">53</field>
            <field name="category">pdc</field>
            <field name="source_model">ops.pdc.payable</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount</field>
            <field name="domain_filter">[('state', '=', 'issued')]</field>
            <field name="date_field">cheque_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-money-check-alt</field>
            <field name="color">#7c3aed</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="requires_cost_access" eval="True"/>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P05,P07,P09,P14,P15</field>
        </record>

        <!-- ============================================================= -->
        <!-- INVENTORY KPIs (4) -->
        <!-- ============================================================= -->

        <record id="kpi_inventory_value" model="ops.kpi">
            <field name="name">Inventory Value</field>
            <field name="code">INVENTORY_VALUE</field>
            <field name="description">Total value of stock on hand</field>
            <field name="sequence">60</field>
            <field name="category">inventory</field>
            <field name="source_model">stock.quant</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">value</field>
            <field name="domain_filter">[('location_id.usage', '=', 'internal')]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-warehouse</field>
            <field name="color">#059669</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="requires_cost_access" eval="True"/>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P04,P05,P08,P09,P16</field>
        </record>

        <record id="kpi_inventory_sku_count" model="ops.kpi">
            <field name="name">Active SKUs</field>
            <field name="code">INVENTORY_SKU_COUNT</field>
            <field name="description">Number of products in stock</field>
            <field name="sequence">61</field>
            <field name="category">inventory</field>
            <field name="source_model">stock.quant</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('location_id.usage', '=', 'internal'), ('quantity', '>', 0)]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-boxes</field>
            <field name="color">#3b82f6</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P05,P08</field>
        </record>

        <record id="kpi_inventory_low_stock" model="ops.kpi">
            <field name="name">Low Stock Items</field>
            <field name="code">INVENTORY_LOW_STOCK</field>
            <field name="description">Products below reorder point</field>
            <field name="sequence">62</field>
            <field name="category">inventory</field>
            <field name="source_model">stock.quant</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('location_id.usage', '=', 'internal'), ('quantity', '>', 0), ('quantity', '&lt;', 10)]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-exclamation-triangle</field>
            <field name="color">#f59e0b</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">down_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P05,P07,P08</field>
        </record>

        <record id="kpi_inventory_pending_delivery" model="ops.kpi">
            <field name="name">Pending Deliveries</field>
            <field name="code">INVENTORY_PENDING_DELIVERY</field>
            <field name="description">Outgoing shipments pending</field>
            <field name="sequence">63</field>
            <field name="category">inventory</field>
            <field name="source_model">stock.picking</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('picking_type_code', '=', 'outgoing'), ('state', 'in', ['assigned', 'waiting', 'confirmed'])]</field>
            <field name="date_field">scheduled_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-truck</field>
            <field name="color">#06b6d4</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P05,P06,P08</field>
        </record>

        <!-- ============================================================= -->
        <!-- TREASURY KPIs (3) -->
        <!-- ============================================================= -->

        <record id="kpi_treasury_cash_balance" model="ops.kpi">
            <field name="name">Cash Balance</field>
            <field name="code">TREASURY_CASH_BALANCE</field>
            <field name="description">Total cash in bank accounts</field>
            <field name="sequence">70</field>
            <field name="category">treasury</field>
            <field name="source_model">account.account</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">current_balance</field>
            <field name="domain_filter">[('account_type', '=', 'asset_cash')]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-wallet</field>
            <field name="color">#10b981</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">company</field>
            <field name="persona_codes">P02,P03,P05,P09,P15</field>
        </record>

        <record id="kpi_treasury_cash_in_mtd" model="ops.kpi">
            <field name="name">Cash In MTD</field>
            <field name="code">TREASURY_CASH_IN_MTD</field>
            <field name="description">Cash inflows this month</field>
            <field name="sequence">71</field>
            <field name="category">treasury</field>
            <field name="source_model">account.payment</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount</field>
            <field name="domain_filter">[('payment_type', '=', 'inbound'), ('state', '=', 'posted')]</field>
            <field name="date_field">date</field>
            <field name="default_period">this_month</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-arrow-circle-down</field>
            <field name="color">#10b981</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P09,P15</field>
        </record>

        <record id="kpi_treasury_cash_out_mtd" model="ops.kpi">
            <field name="name">Cash Out MTD</field>
            <field name="code">TREASURY_CASH_OUT_MTD</field>
            <field name="description">Cash outflows this month</field>
            <field name="sequence">72</field>
            <field name="category">treasury</field>
            <field name="source_model">account.payment</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount</field>
            <field name="domain_filter">[('payment_type', '=', 'outbound'), ('state', '=', 'posted')]</field>
            <field name="date_field">date</field>
            <field name="default_period">this_month</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-arrow-circle-up</field>
            <field name="color">#ef4444</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">down_good</field>
            <field name="requires_cost_access" eval="True"/>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P09,P15</field>
        </record>

        <!-- ============================================================= -->
        <!-- GOVERNANCE KPIs (2) -->
        <!-- ============================================================= -->

        <record id="kpi_3way_pending" model="ops.kpi">
            <field name="name">3-Way Match Pending</field>
            <field name="code">3WAY_PENDING</field>
            <field name="description">Pending 3-way match items</field>
            <field name="sequence">80</field>
            <field name="category">governance</field>
            <field name="source_model">ops.three.way.match</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', '=', 'pending')]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-check-double</field>
            <field name="color">#f59e0b</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">down_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P05,P07,P14</field>
        </record>

        <record id="kpi_3way_exception" model="ops.kpi">
            <field name="name">3-Way Match Exceptions</field>
            <field name="code">3WAY_EXCEPTION</field>
            <field name="description">3-way match items with exceptions</field>
            <field name="sequence">81</field>
            <field name="category">governance</field>
            <field name="source_model">ops.three.way.match</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', '=', 'exception')]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-exclamation-triangle</field>
            <field name="color">#dc2626</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">down_good</field>
            <field name="scope_type">branch</field>
            <field name="persona_codes">P03,P05,P07</field>
        </record>

        <!-- ============================================================= -->
        <!-- BUDGET KPI (1) -->
        <!-- ============================================================= -->

        <record id="kpi_budget_utilization" model="ops.kpi">
            <field name="name">Budget Utilization</field>
            <field name="code">BUDGET_UTILIZATION</field>
            <field name="description">Overall budget utilization percentage</field>
            <field name="sequence">90</field>
            <field name="category">budget</field>
            <field name="source_model">ops.budget</field>
            <field name="calculation_type">average</field>
            <field name="measure_field">utilization_percentage</field>
            <field name="domain_filter">[('state', '=', 'active')]</field>
            <field name="date_field">date_from</field>
            <field name="default_period">this_year</field>
            <field name="format_type">percentage</field>
            <field name="icon">fa-chart-pie</field>
            <field name="color">#8b5cf6</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">company</field>
            <field name="persona_codes">P03,P05,P09,P16</field>
        </record>

        <!-- ============================================================= -->
        <!-- ASSET KPIs (2) -->
        <!-- ============================================================= -->

        <record id="kpi_asset_nbv" model="ops.kpi">
            <field name="name">Total Asset NBV</field>
            <field name="code">ASSET_NBV</field>
            <field name="description">Total net book value of assets</field>
            <field name="sequence">100</field>
            <field name="category">asset</field>
            <field name="source_model">ops.asset</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">book_value</field>
            <field name="domain_filter">[('state', '=', 'running')]</field>
            <field name="date_field">purchase_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-building</field>
            <field name="color">#0891b2</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="requires_cost_access" eval="True"/>
            <field name="scope_type">company</field>
            <field name="persona_codes">P03,P05,P09,P16</field>
        </record>

        <record id="kpi_asset_depreciation_due" model="ops.kpi">
            <field name="name">Depreciation Due</field>
            <field name="code">ASSET_DEPRECIATION_DUE</field>
            <field name="description">Unposted depreciation entries</field>
            <field name="sequence">101</field>
            <field name="category">asset</field>
            <field name="source_model">ops.asset.depreciation</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('move_id', '=', False), ('depreciation_date', '&lt;=', (context_today()).strftime('%Y-%m-%d'))]</field>
            <field name="date_field">depreciation_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-calendar-times</field>
            <field name="color">#f59e0b</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">down_good</field>
            <field name="scope_type">company</field>
            <field name="persona_codes">P03,P16</field>
        </record>

        <!-- ============================================================= -->
        <!-- SYSTEM KPIs (3) - Visible to IT Admin -->
        <!-- ============================================================= -->

        <record id="kpi_sys_users_active" model="ops.kpi">
            <field name="name">Active Users</field>
            <field name="code">SYS_USERS_ACTIVE</field>
            <field name="description">Currently active users</field>
            <field name="sequence">110</field>
            <field name="category">system</field>
            <field name="source_model">res.users</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('active', '=', True), ('share', '=', False)]</field>
            <field name="date_field">login_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-users</field>
            <field name="color">#3b82f6</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="visible_to_it_admin" eval="True"/>
            <field name="scope_type">company</field>
            <field name="persona_codes">P01</field>
        </record>

        <record id="kpi_sys_sessions" model="ops.kpi">
            <field name="name">Active Sessions</field>
            <field name="code">SYS_SESSIONS</field>
            <field name="description">Current active sessions</field>
            <field name="sequence">111</field>
            <field name="category">system</field>
            <field name="source_model">res.users</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('active', '=', True)]</field>
            <field name="date_field">login_date</field>
            <field name="default_period">today</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-desktop</field>
            <field name="color">#10b981</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="visible_to_it_admin" eval="True"/>
            <field name="scope_type">company</field>
            <field name="persona_codes">P01</field>
        </record>

        <record id="kpi_sys_pending_approvals" model="ops.kpi">
            <field name="name">Pending Approvals</field>
            <field name="code">SYS_PENDING_APPROVALS</field>
            <field name="description">System-wide pending approvals (count only)</field>
            <field name="sequence">112</field>
            <field name="category">system</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', '=', 'sent')]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-hourglass-half</field>
            <field name="color">#f59e0b</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">down_good</field>
            <field name="visible_to_it_admin" eval="True"/>
            <field name="scope_type">company</field>
            <field name="persona_codes">P01</field>
        </record>

        <!-- ============================================================= -->
        <!-- OWN RECORDS KPIs (8) - For Sales Rep, Purchase Officer, Warehouse -->
        <!-- ============================================================= -->

        <record id="kpi_my_sales_mtd" model="ops.kpi">
            <field name="name">My Sales MTD</field>
            <field name="code">MY_SALES_MTD</field>
            <field name="description">My sales this month (own records only)</field>
            <field name="sequence">120</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_total</field>
            <field name="domain_filter">[('state', 'in', ['sale', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-dollar-sign</field>
            <field name="color">#10b981</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="scope_type">own</field>
            <field name="persona_codes">P10</field>
        </record>

        <record id="kpi_my_orders_mtd" model="ops.kpi">
            <field name="name">My Orders MTD</field>
            <field name="code">MY_ORDERS_MTD</field>
            <field name="description">My orders this month (own records only)</field>
            <field name="sequence">121</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', 'in', ['sale', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-shopping-bag</field>
            <field name="color">#3b82f6</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="scope_type">own</field>
            <field name="persona_codes">P10</field>
        </record>

        <record id="kpi_my_quotations" model="ops.kpi">
            <field name="name">My Open Quotations</field>
            <field name="code">MY_QUOTATIONS</field>
            <field name="description">My draft quotations (own records only)</field>
            <field name="sequence">122</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', 'in', ['draft', 'sent'])]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-file-alt</field>
            <field name="color">#f59e0b</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">own</field>
            <field name="persona_codes">P10</field>
        </record>

        <record id="kpi_my_quotation_value" model="ops.kpi">
            <field name="name">My Pipeline Value</field>
            <field name="code">MY_QUOTATION_VALUE</field>
            <field name="description">My quotation pipeline value (own records only)</field>
            <field name="sequence">123</field>
            <field name="category">sales</field>
            <field name="source_model">sale.order</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_total</field>
            <field name="domain_filter">[('state', 'in', ['draft', 'sent'])]</field>
            <field name="date_field">create_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-funnel-dollar</field>
            <field name="color">#06b6d4</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">own</field>
            <field name="persona_codes">P10</field>
        </record>

        <record id="kpi_my_po_mtd" model="ops.kpi">
            <field name="name">My POs MTD</field>
            <field name="code">MY_PO_MTD</field>
            <field name="description">My purchase orders this month (own records)</field>
            <field name="sequence">124</field>
            <field name="category">purchase</field>
            <field name="source_model">purchase.order</field>
            <field name="calculation_type">sum</field>
            <field name="measure_field">amount_total</field>
            <field name="domain_filter">[('state', 'in', ['purchase', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">currency</field>
            <field name="icon">fa-file-invoice</field>
            <field name="color">#8b5cf6</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">neutral</field>
            <field name="requires_cost_access" eval="True"/>
            <field name="scope_type">own</field>
            <field name="persona_codes">P11</field>
        </record>

        <record id="kpi_my_po_count" model="ops.kpi">
            <field name="name">My PO Count MTD</field>
            <field name="code">MY_PO_COUNT</field>
            <field name="description">My purchase order count this month (own records)</field>
            <field name="sequence">125</field>
            <field name="category">purchase</field>
            <field name="source_model">purchase.order</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('state', 'in', ['purchase', 'done'])]</field>
            <field name="date_field">date_order</field>
            <field name="default_period">this_month</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-clipboard-list</field>
            <field name="color">#3b82f6</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">neutral</field>
            <field name="scope_type">own</field>
            <field name="persona_codes">P11</field>
        </record>

        <record id="kpi_my_picks_pending" model="ops.kpi">
            <field name="name">My Pending Picks</field>
            <field name="code">MY_PICKS_PENDING</field>
            <field name="description">My pending picks to complete</field>
            <field name="sequence">126</field>
            <field name="category">inventory</field>
            <field name="source_model">stock.picking</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('picking_type_code', '=', 'outgoing'), ('state', 'in', ['assigned', 'waiting'])]</field>
            <field name="date_field">scheduled_date</field>
            <field name="default_period">all_time</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-dolly</field>
            <field name="color">#f59e0b</field>
            <field name="show_trend" eval="False"/>
            <field name="trend_direction">down_good</field>
            <field name="scope_type">own</field>
            <field name="persona_codes">P12</field>
        </record>

        <record id="kpi_my_picks_done_today" model="ops.kpi">
            <field name="name">My Picks Done Today</field>
            <field name="code">MY_PICKS_DONE_TODAY</field>
            <field name="description">Picks I completed today</field>
            <field name="sequence">127</field>
            <field name="category">inventory</field>
            <field name="source_model">stock.picking</field>
            <field name="calculation_type">count</field>
            <field name="domain_filter">[('picking_type_code', '=', 'outgoing'), ('state', '=', 'done')]</field>
            <field name="date_field">date_done</field>
            <field name="default_period">today</field>
            <field name="format_type">integer</field>
            <field name="icon">fa-check-circle</field>
            <field name="color">#10b981</field>
            <field name="show_trend" eval="True"/>
            <field name="trend_direction">up_good</field>
            <field name="scope_type">own</field>
            <field name="persona_codes">P12</field>
        </record>

    </data>
</odoo>
