// =============================================================================
// OPS THEME - DROPDOWN MENUS (Fixed for Odoo 19)
// =============================================================================

// Base dropdown styling - target ALL dropdown variants
.dropdown-menu,
.o-dropdown--menu,
.o-dropdown .o-dropdown-caret,
[class*="dropdown-menu"] {
    background-color: var(--ops-bg-card, #ffffff) !important;
    border: 1px solid var(--ops-border, #e2e8f0) !important;
    border-radius: 8px !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15) !important;
    padding: 8px 0 !important;
}

// App grid menu (top-left grid icon)
.o_navbar_apps_menu .dropdown-menu,
.o_navbar_apps_menu .o-dropdown--menu {
    background-color: var(--ops-bg-card, #ffffff) !important;
    min-width: 300px;
}

// App icons in grid
.o_navbar_apps_menu .o-dropdown--menu a,
.o_navbar_apps_menu .dropdown-item,
.o_app {
    color: var(--ops-text-primary, #1e293b) !important;
    background-color: transparent;
    transition: background-color 0.15s ease;
}

.o_navbar_apps_menu .o-dropdown--menu a:hover,
.o_navbar_apps_menu .dropdown-item:hover,
.o_app:hover {
    background-color: var(--ops-bg-hover, #f1f5f9) !important;
    color: var(--ops-secondary, #3b82f6) !important;
}

// User menu (top-right avatar)
.o_user_menu .dropdown-menu,
.o_user_menu .o-dropdown--menu,
.o-user-menu .dropdown-menu {
    background-color: var(--ops-bg-card, #ffffff) !important;
    min-width: 200px;
}

// All dropdown items
.dropdown-item,
.o-dropdown--menu a,
.o-dropdown-item {
    color: var(--ops-text-primary, #1e293b) !important;
    padding: 8px 16px;
    transition: background-color 0.15s ease, color 0.15s ease;
}

.dropdown-item:hover,
.dropdown-item:focus,
.o-dropdown--menu a:hover,
.o-dropdown-item:hover {
    background-color: var(--ops-bg-hover, #f1f5f9) !important;
    color: var(--ops-secondary, #3b82f6) !important;
}

.dropdown-item:active,
.dropdown-item.active,
.o-dropdown-item.selected {
    background-color: var(--ops-secondary, #3b82f6) !important;
    color: white !important;
}

// Dropdown dividers
.dropdown-divider {
    border-color: var(--ops-border, #e2e8f0);
    margin: 8px 0;
}

// Dropdown headers
.dropdown-header {
    color: var(--ops-text-secondary, #64748b);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    padding: 8px 16px;
}

// Systray dropdowns (notifications, etc.)
.o_mail_systray_dropdown,
.o-mail-systray-dropdown {
    background-color: var(--ops-bg-card, #ffffff) !important;
    border: 1px solid var(--ops-border, #e2e8f0) !important;
    border-radius: 8px !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15) !important;
}

// -----------------------------------------------------------------------------
// AUTOCOMPLETE DROPDOWN
// -----------------------------------------------------------------------------

.o-autocomplete--dropdown-menu,
.ui-autocomplete {
    border: 1px solid var(--ops-border, #e2e8f0) !important;
    border-radius: 8px !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
    background-color: var(--ops-bg-card, #ffffff) !important;
    overflow: hidden;

    .o-autocomplete--dropdown-item,
    .ui-menu-item {
        padding: 10px 16px;
        color: var(--ops-text-primary, #1e293b) !important;
        transition: background-color 0.15s ease;

        &:hover,
        &.ui-state-focus {
            background-color: var(--ops-bg-hover, #f1f5f9) !important;
        }

        &.ui-state-active {
            background-color: var(--ops-secondary, #3b82f6) !important;
            color: white !important;
        }
    }
}

// -----------------------------------------------------------------------------
// MANY2ONE DROPDOWNS
// -----------------------------------------------------------------------------

.o_field_many2one_dropdown,
.select2-dropdown {
    border: 1px solid var(--ops-border, #e2e8f0) !important;
    border-radius: 8px !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
    background: var(--ops-bg-card, #ffffff) !important;
}

// -----------------------------------------------------------------------------
// CONTEXT MENU
// -----------------------------------------------------------------------------

.o_context_menu {
    border: 1px solid var(--ops-border, #e2e8f0) !important;
    border-radius: 8px !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
    background: var(--ops-bg-card, #ffffff) !important;

    .o_menu_item {
        padding: 10px 16px;
        color: var(--ops-text-primary, #1e293b) !important;
        transition: background-color 0.15s ease;

        &:hover {
            background-color: var(--ops-bg-hover, #f1f5f9) !important;
        }
    }
}

// -----------------------------------------------------------------------------
// DARK MODE SUPPORT
// -----------------------------------------------------------------------------

.dark-skin,
[data-color-mode="dark"] {
    .dropdown-menu,
    .o-dropdown--menu,
    [class*="dropdown-menu"] {
        background-color: var(--ops-bg-card, #1e293b) !important;
        border-color: var(--ops-border, #334155) !important;
    }

    .dropdown-item,
    .o-dropdown--menu a {
        color: var(--ops-text-primary, #f1f5f9) !important;
    }

    .dropdown-item:hover,
    .o-dropdown--menu a:hover {
        background-color: var(--ops-bg-hover, #334155) !important;
    }
}

// -----------------------------------------------------------------------------
// DROPDOWN POSITIONING FIXES
// -----------------------------------------------------------------------------

// Autocomplete dropdown positioning
.o-autocomplete--dropdown-menu,
.o_field_many2one .dropdown-menu,
.o_field_many2one .o-dropdown--menu {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    margin-top: 4px !important;
    z-index: 1060 !important;
}

// Many2one field dropdown
.o_field_many2one {
    position: relative;

    .o-autocomplete--dropdown-menu {
        position: absolute !important;
        top: calc(100% + 4px) !important;
        left: 0 !important;
        right: auto !important;
        min-width: 100%;
        max-height: 300px;
        overflow-y: auto;
    }
}

// Selection field dropdown
.o_field_selection {
    .dropdown-menu {
        position: absolute !important;
        top: 100% !important;
        left: 0 !important;
        margin-top: 4px !important;
    }
}

// Ensure dropdowns don't overflow container
.o_form_view .dropdown-menu,
.o_list_view .dropdown-menu {
    max-height: 300px;
    overflow-y: auto;
}
