// =============================================================================
// OPS THEME - TABLES
// =============================================================================
// Clean, modern table styling for list views
// Following Gilded Admin design principles
// Uses CSS variables for theme compliance
// =============================================================================

// =============================================================================
// BASE TABLE STYLING
// =============================================================================

.table,
.o_list_table {
    border-collapse: separate;
    border-spacing: 0;
    width: 100%;
    background: var(--ops-bg-card);
    border-radius: 8px;
    overflow: hidden;
}

// =============================================================================
// TABLE HEADER
// =============================================================================

.table thead,
.o_list_table thead {
    background: var(--ops-bg-hover);

    th {
        background: var(--ops-bg-hover);
        border-bottom: 2px solid var(--ops-border);
        font-weight: 600;
        font-size: 0.6875rem;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        color: var(--ops-text-secondary);
        padding: 12px 16px;
        vertical-align: middle;
        white-space: nowrap;

        // Sortable header
        &.o_column_sortable {
            cursor: pointer;
            transition: color 0.15s ease;

            &:hover {
                color: var(--ops-secondary);
            }

            // Sort indicator
            .fa-sort,
            .fa-sort-asc,
            .fa-sort-desc {
                margin-left: 4px;
                font-size: 10px;
            }
        }

        // Checkbox column
        &.o_list_record_selector {
            width: 40px;
            padding-left: 16px;
            padding-right: 8px;
        }
    }
}

// =============================================================================
// TABLE BODY
// =============================================================================

.table tbody,
.o_list_table tbody {
    td {
        padding: 12px 16px;
        border-bottom: 1px solid var(--ops-divider);
        vertical-align: middle;
        color: var(--ops-text-primary);
        font-size: 14px;

        // Checkbox column
        &.o_list_record_selector {
            width: 40px;
            padding-left: 16px;
            padding-right: 8px;
        }

        // Number columns
        &.o_list_number {
            text-align: right;
            font-variant-numeric: tabular-nums;
        }
    }

    tr {
        transition: background-color 0.15s ease;

        &:hover {
            background-color: var(--ops-bg-hover);
        }

        // Selected row
        &.o_data_row_selected {
            background-color: rgba(var(--ops-secondary-rgb), 0.08);

            &:hover {
                background-color: rgba(var(--ops-secondary-rgb), 0.12);
            }
        }

        // Last row - no border
        &:last-child td {
            border-bottom: none;
        }
    }
}

// =============================================================================
// TABLE FOOTER
// =============================================================================

.table tfoot,
.o_list_table tfoot {
    background: var(--ops-bg-hover);

    td {
        padding: 12px 16px;
        border-top: 2px solid var(--ops-border);
        font-weight: 600;
        color: var(--ops-text-primary);
    }
}

// =============================================================================
// GROUPING
// =============================================================================

.o_list_view {
    .o_group_header {
        background: var(--ops-bg-body);
        font-weight: 600;
        color: #475569;

        td {
            padding: 10px 16px;
            border-bottom: 1px solid var(--ops-border);
        }

        &:hover {
            background: var(--ops-border);
        }

        // Expand/collapse icon
        .fa-caret-right,
        .fa-caret-down {
            margin-right: 8px;
            color: var(--ops-text-secondary);
        }
    }

    // Group count badge
    .o_group_name {
        display: inline-flex;
        align-items: center;
        gap: 8px;

        .badge {
            font-size: 0.6875rem;
            padding: 2px 8px;
            background: rgba(var(--ops-secondary-rgb), 0.15);
            color: var(--ops-secondary);
        }
    }
}

// =============================================================================
// EMPTY STATE
// =============================================================================

.o_list_view .o_view_nocontent {
    padding: 48px 24px;
    text-align: center;

    .o_nocontent_help {
        p {
            color: var(--ops-text-secondary);
            font-size: 14px;
            margin-bottom: 16px;
        }

        .btn {
            margin-top: 8px;
        }
    }
}

// =============================================================================
// EDITABLE LIST ROWS
// =============================================================================

.o_list_view.o_editable {
    .o_data_row.o_selected_row {
        background-color: rgba(var(--ops-secondary-rgb), 0.08);

        td {
            background-color: transparent;
        }
    }

    .o_field_cell {
        padding: 4px 8px;

        .o_input {
            padding: 6px 10px;
            min-height: 34px;
        }
    }
}

// =============================================================================
// ROW ACTIONS
// =============================================================================

.o_list_view {
    .o_data_row {
        // Action buttons that appear on hover
        .o_list_record_remove,
        .o_list_record_open {
            opacity: 0.5;
            transition: opacity 0.15s ease;

            &:hover {
                opacity: 1;
            }
        }

        &:hover {
            .o_list_record_remove,
            .o_list_record_open {
                opacity: 0.7;
            }
        }
    }
}

// =============================================================================
// STICKY HEADER
// =============================================================================

.o_list_view {
    thead {
        position: sticky;
        top: 0;
        z-index: 1;
    }
}

// =============================================================================
// RESPONSIVE
// =============================================================================

@media (max-width: 768px) {
    .o_list_table {
        thead th,
        tbody td,
        tfoot td {
            padding: 10px 12px;
        }

        // Hide less important columns on mobile
        .o_optional_columns_dropdown {
            display: inline-block;
        }
    }
}

// =============================================================================
// SPECIAL COLUMNS
// =============================================================================

// Avatar column
.o_list_view .o_field_image {
    img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
    }
}

// Color indicator
.o_list_view .o_data_cell.o_color_cell {
    width: 8px;
    padding: 0;

    .o_colorpicker_section {
        height: 100%;
    }
}

// Progress bar in lists
.o_list_view .o_field_progressbar {
    .o_progress {
        height: 6px;
        border-radius: 3px;
        background: var(--ops-border);
        overflow: hidden;

        .o_progress_bar {
            height: 100%;
            border-radius: 3px;
            background: var(--ops-secondary);
        }
    }
}

// =============================================================================
// STRIPED TABLES (Optional)
// =============================================================================

.table-striped tbody tr:nth-of-type(odd) {
    background-color: #fafbfc;
}

// =============================================================================
// DARK MODE - TABLES
// =============================================================================

[data-color-mode="dark"] {
    .table,
    .o_list_table {
        background: #1e293b;
    }

    // Header
    .table thead,
    .o_list_table thead {
        background: #0f172a;

        th {
            background: #0f172a;
            border-bottom-color: #334155;
            color: #94a3b8;
        }
    }

    // Body
    .table tbody,
    .o_list_table tbody {
        td {
            border-bottom-color: #334155;
            color: #f1f5f9;
        }

        tr {
            &:hover {
                background-color: #334155;
            }

            &.o_data_row_selected {
                background-color: rgba(59, 130, 246, 0.15);

                &:hover {
                    background-color: rgba(59, 130, 246, 0.2);
                }
            }
        }
    }

    // Footer
    .table tfoot,
    .o_list_table tfoot {
        background: #0f172a;

        td {
            border-top-color: #334155;
            color: #f1f5f9;
        }
    }

    // Grouping
    .o_list_view .o_group_header {
        background: #0f172a;
        color: #94a3b8;

        td {
            border-bottom-color: #334155;
        }

        &:hover {
            background: #1e293b;
        }
    }

    // Editable rows
    .o_list_view.o_editable .o_data_row.o_selected_row {
        background-color: rgba(59, 130, 246, 0.15);
    }

    // Striped (if used)
    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #1a2234;
    }

    // Progress bar
    .o_list_view .o_field_progressbar .o_progress {
        background: #334155;
    }
}
