// =============================================================================
// OPS Theme  Modal / Dialog Styling
// =============================================================================
// PRINCIPLE: Color only. Odoo 19 native handles all modal form layout.
//   - .o_group grid: NATIVE (do not override)
//   - .o_inner_group grid: NATIVE (do not override)
//   - .o_cell sizing: NATIVE (do not override)
//   - Modal sizing (sm/md/lg/xl): NATIVE (do not override)
//   - We only add: header color, backdrop, border-radius, shadows, button colors
// =============================================================================

// =============================================================================
// MODAL CONTENT CONTAINER - Appearance Only
// =============================================================================
.modal-content {
    border: none;
    border-radius: var(--ops-radius-xl, 16px);
    box-shadow: var(--ops-shadow-modal, 0 25px 50px -12px rgba(0, 0, 0, 0.25));
    background-color: var(--ops-bg-card, #ffffff);
    overflow: hidden;
}

// =============================================================================
// MODAL HEADER - Appearance Only
// =============================================================================
.modal-header {
    background-color: var(--ops-primary, #1e293b);
    color: var(--ops-text-inverse, #ffffff);
    border-bottom: none;

    .modal-title {
        font-size: var(--ops-text-lg, 1.125rem);
        font-weight: var(--ops-font-semibold, 600);
        color: inherit;
    }

    .btn-close {
        filter: brightness(0) invert(1);
        opacity: 0.7;
        transition: opacity var(--ops-transition-fast, 150ms ease);

        &:hover {
            opacity: 1;
        }

        &:focus {
            box-shadow: none;
            opacity: 1;
        }
    }
}

// =============================================================================
// MODAL BODY - Appearance Only (NO layout overrides)
// =============================================================================
.modal-body {
    background-color: var(--ops-bg-card, #ffffff);
    color: var(--ops-text-primary, #1e293b);

    // Section headers - appearance only
    .o_horizontal_separator {
        border-bottom: 1px solid var(--ops-border-default, #e2e8f0);
        font-size: var(--ops-text-sm, 0.875rem);
        font-weight: var(--ops-font-semibold, 600);
        color: var(--ops-text-primary, #1e293b);
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    // Form labels - appearance only
    .o_form_label {
        font-size: var(--ops-text-sm, 0.875rem);
        font-weight: var(--ops-font-medium, 500);
        color: var(--ops-text-secondary, #64748b);
    }

    // Input fields - appearance only
    input.o_input,
    select.o_input,
    textarea.o_input,
    .o_input {
        font-size: var(--ops-text-sm, 0.875rem);
        color: var(--ops-text-primary, #1e293b);
        background-color: var(--ops-bg-card, #ffffff);
        border: var(--ops-input-border-width, 1px) solid var(--ops-border-default, #e2e8f0);
        border-radius: var(--ops-radius-md, 8px);
        transition: border-color var(--ops-transition-fast, 150ms ease), 
                    box-shadow var(--ops-transition-fast, 150ms ease);

        &::placeholder {
            color: var(--ops-text-muted, #94a3b8);
        }

        &:hover:not(:disabled):not(:focus) {
            border-color: var(--ops-border-strong, #cbd5e1);
        }

        &:focus {
            outline: none;
            border-color: var(--ops-border-focus, #3b82f6);
            box-shadow: var(--ops-input-focus-ring, 0 0 0 3px rgba(59, 130, 246, 0.15));
        }

        &:disabled,
        &[readonly] {
            background-color: var(--ops-surface-sunken, #f8fafc);
            color: var(--ops-text-muted, #94a3b8);
            cursor: not-allowed;
        }
    }
}

// =============================================================================
// MODAL FOOTER - Appearance Only
// =============================================================================
.modal-footer {
    background-color: var(--ops-surface-sunken, #f8fafc);
    border-top: 1px solid var(--ops-border-default, #e2e8f0);

    .btn {
        font-size: var(--ops-text-sm, 0.875rem);
        font-weight: var(--ops-font-medium, 500);
        border-radius: var(--ops-radius-md, 8px);
        transition: all var(--ops-transition-fast, 150ms ease);
    }

    .btn-primary {
        background-color: var(--ops-secondary, #3b82f6);
        border-color: var(--ops-secondary, #3b82f6);
        color: var(--ops-text-inverse, #ffffff);

        &:hover:not(:disabled) {
            background-color: var(--ops-secondary-hover, #2563eb);
            border-color: var(--ops-secondary-hover, #2563eb);
        }
    }

    .btn-secondary,
    .btn-default {
        background-color: var(--ops-bg-card, #ffffff);
        border-color: var(--ops-border-default, #e2e8f0);
        color: var(--ops-text-primary, #1e293b);

        &:hover:not(:disabled) {
            background-color: var(--ops-surface-sunken, #f8fafc);
            border-color: var(--ops-border-strong, #cbd5e1);
        }
    }

    .btn-link {
        color: var(--ops-text-link, #3b82f6);

        &:hover {
            color: var(--ops-text-link-hover, #2563eb);
        }
    }
}

// =============================================================================
// WIZARD FORM VIEW INSIDE MODAL - Appearance Only
// =============================================================================
.o_dialog {
    .o_form_view {
        background: transparent;

        .o_form_sheet_bg {
            background: transparent;
        }

        .o_form_sheet {
            box-shadow: none;
            border: none;
            background: transparent;
        }
    }
}

// =============================================================================
// RADIO BUTTONS IN MODALS - Appearance Only
// =============================================================================
.modal-body {
    .o_field_radio,
    .o_radio_input,
    .o_field_selection_radio {
        .o_radio_item,
        .form-check {
            background: var(--ops-surface-sunken, #f8fafc);
            border: 1px solid var(--ops-border-default, #e2e8f0);
            border-radius: var(--ops-radius-md, 8px);
            cursor: pointer;
            transition: all var(--ops-transition-fast, 150ms ease);

            &:hover {
                background: rgba(59, 130, 246, 0.05);
                border-color: var(--ops-secondary, #3b82f6);
            }

            &:has(input:checked) {
                background: rgba(59, 130, 246, 0.1);
                border-color: var(--ops-secondary, #3b82f6);
            }

            input[type="radio"] {
                accent-color: var(--ops-secondary, #3b82f6);
            }

            label {
                font-size: var(--ops-text-sm, 0.875rem);
                color: var(--ops-text-primary, #1e293b);
                cursor: pointer;
            }
        }
    }
}

// =============================================================================
// MODAL BACKDROP
// =============================================================================
.modal-backdrop.show {
    background-color: rgba(15, 23, 42, 0.6);
}

// =============================================================================
// DARK MODE - Color Overrides Only
// =============================================================================
[data-color-mode="dark"] {
    .modal-content {
        background-color: var(--ops-bg-card, #1e293b);
        border: 1px solid var(--ops-border-default, #334155);
    }

    .modal-header {
        background-color: #0f172a;
        color: #f1f5f9;
        border-bottom: 1px solid #334155;

        .modal-title {
            color: inherit;
        }
    }

    .modal-body {
        background-color: var(--ops-bg-card, #1e293b);
        color: var(--ops-text-primary, #f1f5f9);

        .o_form_label {
            color: var(--ops-text-secondary, #94a3b8);
        }

        input.o_input,
        select.o_input,
        textarea.o_input,
        .o_input {
            background-color: var(--ops-bg-input, #334155);
            border-color: var(--ops-border-default, #475569);
            color: var(--ops-text-primary, #f1f5f9);

            &::placeholder {
                color: var(--ops-text-muted, #64748b);
            }

            &:disabled,
            &[readonly] {
                background-color: var(--ops-surface-sunken, #0f172a);
            }
        }

        .o_horizontal_separator {
            color: var(--ops-text-primary, #f1f5f9);
            border-bottom-color: var(--ops-border-default, #334155);
        }

        .o_radio_item,
        .form-check {
            background: var(--ops-surface-elevated, #334155);
            border-color: var(--ops-border-default, #475569);

            &:hover {
                background: rgba(59, 130, 246, 0.1);
            }

            &:has(input:checked) {
                background: rgba(59, 130, 246, 0.15);
            }

            label {
                color: var(--ops-text-primary, #f1f5f9);
            }
        }
    }

    .modal-footer {
        background-color: var(--ops-surface-sunken, #0f172a);
        border-top-color: var(--ops-border-default, #334155);

        .btn-secondary,
        .btn-default {
            background-color: var(--ops-surface-elevated, #334155);
            border-color: var(--ops-border-default, #475569);
            color: var(--ops-text-primary, #f1f5f9);

            &:hover:not(:disabled) {
                background-color: var(--ops-bg-card, #1e293b);
            }
        }
    }

    .modal-backdrop.show {
        background-color: rgba(0, 0, 0, 0.7);
    }
}
