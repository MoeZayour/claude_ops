<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Product Visibility Rule: Users only see products from their allowed Business Units -->
        <!-- Temporarily commented out for installation - will be added after module is installed -->
        <!--
        <record id="product_template_rule_business_unit" model="ir.rule">
            <field name="name">Product Template: Business Unit Access</field>
            <field name="model_id" ref="product.model_product_template"/>
            <field name="domain_force">['|', ('business_unit_id', 'in', user.sudo().ops_allowed_business_unit_ids.ids), ('business_unit_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        -->
        
        <!-- Fallback: If no business unit restriction, show all products -->
        <!-- Temporarily disabled during installation -->
        <!--
        <record id="product_template_rule_global" model="ir.rule">
            <field name="name">Product Template: Global Access</field>
            <field name="model_id" ref="product.model_product_template"/>
            <field name="domain_force">[('business_unit_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('base.group_portal'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        -->
    </data>
</odoo>
