<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ================================================================
         APPROVALS MENU STRUCTURE

         Root menu is defined in ops_menus.xml as menu_ops_approvals_root
         This file defines sub-menus and actions under the Approvals app.
         ================================================================ -->

    <!-- My Approvals Dashboard -->
    <menuitem id="menu_ops_my_approvals_dashboard"
              name="My Approvals"
              parent="menu_ops_approvals_root"
              action="action_ops_approval_dashboard"
              sequence="10"
              groups="base.group_system,ops_matrix_core.group_ops_user"/>

    <!-- Pending Approvals Action -->
    <record id="action_ops_pending_approvals" model="ir.actions.act_window">
        <field name="name">Pending Approvals</field>
        <field name="res_model">ops.approval.request</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('state', '=', 'pending'), ('approver_ids', 'in', uid)]</field>
        <field name="context">{'default_state': 'pending'}</field>
    </record>

    <!-- Pending Approvals Menu -->
    <menuitem id="menu_ops_pending_approvals"
              name="Pending Approvals"
              parent="menu_ops_approvals_root"
              action="action_ops_pending_approvals"
              sequence="20"
              groups="base.group_system,ops_matrix_core.group_ops_user"/>

    <!-- Approval History -->
    <menuitem id="menu_ops_approval_history"
              name="Approval History"
              parent="menu_ops_approvals_root"
              action="action_ops_approval_request"
              sequence="30"
              groups="base.group_system,ops_matrix_core.group_ops_user"/>

    <!-- SLA Tracking (Managers Only) -->
    <menuitem id="menu_ops_sla_tracking"
              name="SLA Tracking"
              parent="menu_ops_approvals_root"
              action="action_ops_sla_instance"
              sequence="40"
              groups="base.group_system,ops_matrix_core.group_ops_manager"/>

    <!-- Violations and Alerts (Admins Only) -->
    <menuitem id="menu_ops_violations"
              name="Violations &amp; Alerts"
              parent="menu_ops_approvals_root"
              action="action_ops_sod_violations"
              sequence="50"
              groups="base.group_system,ops_matrix_core.group_ops_admin_power"/>
</odoo>
