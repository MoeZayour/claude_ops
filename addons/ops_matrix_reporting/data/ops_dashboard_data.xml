<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Executive Dashboard -->
        <record id="dashboard_executive" model="ops.dashboard">
            <field name="name">Executive Dashboard</field>
            <field name="sequence">10</field>
        </record>

        <record id="widget_exec_total_sales" model="ops.dashboard.widget">
            <field name="name">Total Sales</field>
            <field name="dashboard_id" ref="dashboard_executive"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">ops.sales.analysis</field>
            <field name="data_source_method">get_summary_by_branch</field>
            <field name="sequence">10</field>
            <field name="col_span">3</field>
            <field name="config">{"icon": "fa-line-chart", "description": "Total revenue across all branches"}</field>
        </record>

        <record id="widget_exec_total_margin" model="ops.dashboard.widget">
            <field name="name">Total Margin</field>
            <field name="dashboard_id" ref="dashboard_executive"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">ops.sales.analysis</field>
            <field name="data_source_method">get_summary_by_branch</field>
            <field name="sequence">20</field>
            <field name="col_span">3</field>
            <field name="config">{"icon": "fa-money", "description": "Total gross profit"}</field>
        </record>

        <record id="widget_exec_inventory_value" model="ops.dashboard.widget">
            <field name="name">Inventory Value</field>
            <field name="dashboard_id" ref="dashboard_executive"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">ops.inventory.analysis</field>
            <field name="sequence">30</field>
            <field name="col_span">3</field>
            <field name="config">{"icon": "fa-cubes", "description": "Total value of stock on hand"}</field>
        </record>

        <record id="widget_exec_sales_by_branch" model="ops.dashboard.widget">
            <field name="name">Sales by Branch</field>
            <field name="dashboard_id" ref="dashboard_executive"/>
            <field name="widget_type">chart_bar</field>
            <field name="data_source_model">ops.sales.analysis</field>
            <field name="data_source_method">get_summary_by_branch</field>
            <field name="sequence">40</field>
            <field name="col_span">6</field>
        </record>

        <!-- Branch Performance Dashboard -->
        <record id="dashboard_branch" model="ops.dashboard">
            <field name="name">Branch Performance</field>
            <field name="sequence">20</field>
        </record>

        <record id="widget_branch_summary" model="ops.dashboard.widget">
            <field name="name">Branch Revenue Summary</field>
            <field name="dashboard_id" ref="dashboard_branch"/>
            <field name="widget_type">list</field>
            <field name="data_source_model">ops.sales.analysis</field>
            <field name="data_source_method">get_summary_by_branch</field>
            <field name="sequence">10</field>
            <field name="col_span">12</field>
        </record>

        <!-- BU Performance Dashboard -->
        <record id="dashboard_bu" model="ops.dashboard">
            <field name="name">BU Performance</field>
            <field name="sequence">30</field>
        </record>

        <record id="widget_bu_sales" model="ops.dashboard.widget">
            <field name="name">Sales by Business Unit</field>
            <field name="dashboard_id" ref="dashboard_bu"/>
            <field name="widget_type">chart_pie</field>
            <field name="data_source_model">ops.sales.analysis</field>
            <field name="data_source_method">get_summary_by_business_unit</field>
            <field name="sequence">10</field>
            <field name="col_span">6</field>
        </record>

        <!-- Sales Performance Dashboard -->
        <record id="dashboard_sales" model="ops.dashboard">
            <field name="name">Sales Performance</field>
            <field name="sequence">40</field>
        </record>

        <record id="widget_sales_margin_analysis" model="ops.dashboard.widget">
            <field name="name">Margin Analysis</field>
            <field name="dashboard_id" ref="dashboard_sales"/>
            <field name="widget_type">list</field>
            <field name="data_source_model">ops.sales.analysis</field>
            <field name="data_source_method">get_margin_analysis</field>
            <field name="sequence">10</field>
            <field name="col_span">12</field>
        </record>

        <!-- Add more widgets to reach 17+ -->
        <record id="widget_exec_top_products" model="ops.dashboard.widget">
            <field name="name">Top Products</field>
            <field name="dashboard_id" ref="dashboard_executive"/>
            <field name="widget_type">list</field>
            <field name="data_source_model">ops.sales.analysis</field>
            <field name="sequence">50</field>
            <field name="col_span">6</field>
        </record>

        <record id="widget_branch_margin" model="ops.dashboard.widget">
            <field name="name">Branch Margin %</field>
            <field name="dashboard_id" ref="dashboard_branch"/>
            <field name="widget_type">chart_bar</field>
            <field name="data_source_model">ops.sales.analysis</field>
            <field name="data_source_method">get_summary_by_branch</field>
            <field name="sequence">20</field>
            <field name="col_span">6</field>
        </record>

        <record id="widget_bu_inventory" model="ops.dashboard.widget">
            <field name="name">Inventory by BU</field>
            <field name="dashboard_id" ref="dashboard_bu"/>
            <field name="widget_type">chart_bar</field>
            <field name="data_source_model">ops.inventory.analysis</field>
            <field name="sequence">20</field>
            <field name="col_span">6</field>
        </record>

        <record id="widget_sales_matrix" model="ops.dashboard.widget">
            <field name="name">Branch x BU Matrix</field>
            <field name="dashboard_id" ref="dashboard_sales"/>
            <field name="widget_type">list</field>
            <field name="data_source_model">ops.sales.analysis</field>
            <field name="data_source_method">get_summary_by_matrix</field>
            <field name="sequence">20</field>
            <field name="col_span">12</field>
        </record>

        <record id="widget_exec_financial_status" model="ops.dashboard.widget">
            <field name="name">Financial Status</field>
            <field name="dashboard_id" ref="dashboard_executive"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">ops.financial.analysis</field>
            <field name="sequence">60</field>
            <field name="col_span">3</field>
            <field name="config">{"icon": "fa-university", "description": "Current financial balance"}</field>
        </record>

        <record id="widget_branch_count" model="ops.dashboard.widget">
            <field name="name">Active Branches</field>
            <field name="dashboard_id" ref="dashboard_branch"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">res.company</field>
            <field name="sequence">30</field>
            <field name="col_span">3</field>
        </record>

        <record id="widget_bu_count" model="ops.dashboard.widget">
            <field name="name">Active Business Units</field>
            <field name="dashboard_id" ref="dashboard_bu"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">ops.business.unit</field>
            <field name="sequence">30</field>
            <field name="col_span">3</field>
        </record>

        <record id="widget_sales_order_count" model="ops.dashboard.widget">
            <field name="name">Confirmed Orders</field>
            <field name="dashboard_id" ref="dashboard_sales"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">sale.order</field>
            <field name="domain">[('state', 'in', ['sale', 'done'])]</field>
            <field name="sequence">30</field>
            <field name="col_span">3</field>
        </record>

        <record id="widget_exec_customer_count" model="ops.dashboard.widget">
            <field name="name">Total Customers</field>
            <field name="dashboard_id" ref="dashboard_executive"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">res.partner</field>
            <field name="domain">[('customer_rank', '>', 0)]</field>
            <field name="sequence">70</field>
            <field name="col_span">3</field>
        </record>

        <record id="widget_branch_pending_orders" model="ops.dashboard.widget">
            <field name="name">Pending Orders</field>
            <field name="dashboard_id" ref="dashboard_branch"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">sale.order</field>
            <field name="domain">[('state', '=', 'draft')]</field>
            <field name="sequence">40</field>
            <field name="col_span">3</field>
        </record>

        <record id="widget_bu_product_count" model="ops.dashboard.widget">
            <field name="name">Products in BUs</field>
            <field name="dashboard_id" ref="dashboard_bu"/>
            <field name="widget_type">kpi</field>
            <field name="data_source_model">product.template</field>
            <field name="sequence">40</field>
            <field name="col_span">3</field>
        </record>

    </data>

    <!-- Actions for each dashboard -->
    <record id="action_dashboard_executive" model="ir.actions.client">
        <field name="name">Executive Dashboard</field>
        <field name="tag">ops_dashboard_tag</field>
        <field name="params" eval="{'dashboard_id': ref('dashboard_executive')}"/>
    </record>

    <record id="action_dashboard_branch" model="ir.actions.client">
        <field name="name">Branch Performance</field>
        <field name="tag">ops_dashboard_tag</field>
        <field name="params" eval="{'dashboard_id': ref('dashboard_branch')}"/>
    </record>

    <record id="action_dashboard_bu" model="ir.actions.client">
        <field name="name">BU Performance</field>
        <field name="tag">ops_dashboard_tag</field>
        <field name="params" eval="{'dashboard_id': ref('dashboard_bu')}"/>
    </record>

    <record id="action_dashboard_sales" model="ir.actions.client">
        <field name="name">Sales Performance</field>
        <field name="tag">ops_dashboard_tag</field>
        <field name="params" eval="{'dashboard_id': ref('dashboard_sales')}"/>
    </record>

    <!-- Menus for each dashboard -->
    <menuitem id="menu_dashboard_executive"
              name="Executive Dashboard"
              parent="menu_ops_dashboards_root"
              action="action_dashboard_executive"
              sequence="10"/>

    <menuitem id="menu_dashboard_branch"
              name="Branch Performance"
              parent="menu_ops_dashboards_root"
              action="action_dashboard_branch"
              sequence="20"/>

    <menuitem id="menu_dashboard_bu"
              name="BU Performance"
              parent="menu_ops_dashboards_root"
              action="action_dashboard_bu"
              sequence="30"/>

    <menuitem id="menu_dashboard_sales"
              name="Sales Performance"
              parent="menu_ops_dashboards_root"
              action="action_dashboard_sales"
              sequence="40"/>
</odoo>
